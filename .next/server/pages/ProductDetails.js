"use strict";(()=>{var e={};e.id=149,e.ids=[149,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},1186:(e,t,o)=>{o.r(t),o.d(t,{config:()=>G,default:()=>A,getServerSideProps:()=>I,getStaticPaths:()=>z,getStaticProps:()=>q,reportWebVitals:()=>H,routeModule:()=>W,unstable_getServerProps:()=>Z,unstable_getServerSideProps:()=>Q,unstable_getStaticParams:()=>X,unstable_getStaticPaths:()=>$,unstable_getStaticProps:()=>R});var n={};o.r(n),o.d(n,{default:()=>k});var r=o(7093),a=o(5244),i=o(1323),c=o(1777),s=o.n(c),d=o(5863),l=o.n(d),u=o(997),m=o(6689),f=o(5086),p=o(3843),O=o(6166);(function(){var e=new S("Cannot find module 'react-router-dom'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=new S("Cannot find module 'react-redux'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=new S("Cannot find module '__barrel_optimize__?names=FaHeart,FaShoppingCart,FaStar!=!react-icons/fa'");throw e.code="MODULE_NOT_FOUND",e}();let _=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  max-width: 1200px;
  margin: 2rem auto;
  padding: 0 1rem;
`,h=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  background: none;
  border: none;
  color: #6366f1;
  cursor: pointer;
  font-size: 1rem;
  padding: 0;
  margin-bottom: 2rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;

  &:hover {
    color: #4f46e5;
  }
`,g=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  background: white;
  padding: 2rem;
  border-radius: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
`,b=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  width: 100%;
  height: 400px;
  object-fit: cover;
  border-radius: 0.5rem;
`,w=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  display: flex;
  flex-direction: column;
`,y=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  color: #1f2937;
  margin: 0 0 1rem 0;
`,j=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  color: #6366f1;
  font-size: 1.5rem;
  font-weight: 600;
  margin: 0 0 1rem 0;
`,x=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  color: #4b5563;
  margin: 0 0 2rem 0;
  line-height: 1.6;
`,D=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
`,U=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  display: flex;
  color: #fbbf24;
`,N=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  color: #6b7280;
  font-size: 0.875rem;
`,v=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  margin: 1.5rem 0;
  padding: 1rem;
  background: #f9fafb;
  border-radius: 0.5rem;
`,C=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
  color: #4b5563;

  &:last-child {
    margin-bottom: 0;
  }
`,E=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  display: flex;
  gap: 1rem;
  margin-top: 1rem;
`,F=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  flex: 1;
  padding: 1rem;
  background-color: #6366f1;
  color: white;
  border: none;
  border-radius: 0.5rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;

  &:hover {
    background-color: #4f46e5;
  }
`,P=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())(F)`
  background-color: #f3f4f6;
  color: #4b5563;

  &:hover {
    background-color: #e5e7eb;
  }
`,M=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  text-align: center;
  padding: 2rem;
  color: #6b7280;
`,S=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  text-align: center;
  padding: 2rem;
  color: #ef4444;
  background: #fee2e2;
  border-radius: 0.5rem;
`,T=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  margin: 1rem 0;
`,L=Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  padding: 0.5rem 1rem;
  margin-right: 0.5rem;
  border: 1px solid ${e=>e.selected?"#6366f1":"#e5e7eb"};
  background-color: ${e=>e.selected?"#6366f1":"white"};
  color: ${e=>e.selected?"white":"#4b5563"};
  border-radius: 0.25rem;
  cursor: pointer;
  transition: all 0.2s;

  &:hover {
    border-color: #6366f1;
  }
`;Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  margin: 1rem 0;
  display: flex;
  gap: 0.5rem;
`,Object(function(){var e=new S("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  width: 2rem;
  height: 2rem;
  border: 2px solid ${e=>e.selected?"#6366f1":"transparent"};
  border-radius: 50%;
  background-color: ${e=>e.color};
  cursor: pointer;
  transition: all 0.2s;

  &:hover {
    transform: scale(1.1);
  }
`;let k=()=>{let{id:e}=Object(function(){var e=new S("Cannot find module 'react-router-dom'");throw e.code="MODULE_NOT_FOUND",e}())(),t=Object(function(){var e=new S("Cannot find module 'react-router-dom'");throw e.code="MODULE_NOT_FOUND",e}())(),o=Object(function(){var e=new S("Cannot find module 'react-redux'");throw e.code="MODULE_NOT_FOUND",e}())(),[n,r]=(0,m.useState)(null),[a,i]=(0,m.useState)(!0),[c,s]=(0,m.useState)(null),[d,l]=(0,m.useState)(!1),[k,A]=(0,m.useState)(""),[q,z]=(0,m.useState)("success"),[I,G]=(0,m.useState)(!1),[H,R]=(0,m.useState)(null),[$,X]=(0,m.useState)(null);return((0,m.useEffect)(()=>{(async()=>{try{let t=await p.ZP.get(`/products/${e}`);r(t.data)}catch(e){s("Товар не найден")}finally{i(!1)}})()},[e]),a)?u.jsx(_,{children:u.jsx(M,{children:"Загрузка товара..."})}):c?u.jsx(_,{children:u.jsx(S,{children:c})}):(0,u.jsxs)(_,{children:[u.jsx(h,{onClick:()=>t(-1),children:"← Назад"}),(0,u.jsxs)(g,{children:[u.jsx(b,{src:n.image,alt:n.name}),(0,u.jsxs)(w,{children:[u.jsx(y,{children:n.name}),(0,u.jsxs)(D,{children:[u.jsx(U,{children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>u.jsx(Object(function(){var e=new S("Cannot find module '__barrel_optimize__?names=FaHeart,FaShoppingCart,FaStar!=!react-icons/fa'");throw e.code="MODULE_NOT_FOUND",e}()),{color:t<Math.round(n.rating)?"#fbbf24":"#e5e7eb"},t))}),(0,u.jsxs)(N,{children:["(",n.rating,")"]})]}),(0,u.jsxs)(j,{children:[n.price.toLocaleString("ru-RU")," ₽"]}),u.jsx("div",{style:{margin:"1rem 0",color:n.stock>0?"#10B981":"#EF4444"},children:n.stock>0?`В наличии: ${n.stock} шт.`:"Нет в наличии"}),u.jsx(x,{children:n.description}),(()=>{if("Одежда"!==n.category&&"Обувь"!==n.category)return null;let e="Обувь"===n.category?["36","37","38","39","40","41","42","43","44","45"]:["XS","S","M","L","XL","XXL"];return(0,u.jsxs)(T,{children:[u.jsx("h4",{children:"Размер:"}),u.jsx("div",{children:e.map(e=>u.jsx(L,{selected:H===e,onClick:()=>R(e),children:e},e))})]})})(),n.details?(0,u.jsxs)(v,{children:[u.jsx("h3",{children:"Характеристики:"}),Object.entries(n.details).map(([e,t])=>(0,u.jsxs)(C,{children:[u.jsx(Object(function(){var e=new S("Cannot find module '__barrel_optimize__?names=FaHeart,FaShoppingCart,FaStar!=!react-icons/fa'");throw e.code="MODULE_NOT_FOUND",e}()),{color:"#6366f1",size:14}),(0,u.jsxs)("strong",{children:[e,":"]})," ",Array.isArray(t)?t.join(", "):t]},e))]}):null,(0,u.jsxs)(E,{children:[(0,u.jsxs)(F,{onClick:()=>{if("Одежда"===n.category&&!H||"Обувь"===n.category&&!H){A("Пожалуйста, выберите размер"),z("error"),l(!0);return}o((0,f.Xq)({...n,quantity:1,selectedSize:H,selectedColor:$})),A("Товар добавлен в корзину"),z("success"),l(!0)},disabled:0===n.stock,children:[u.jsx(Object(function(){var e=new S("Cannot find module '__barrel_optimize__?names=FaHeart,FaShoppingCart,FaStar!=!react-icons/fa'");throw e.code="MODULE_NOT_FOUND",e}()),{}),n.stock>0?"Добавить в корзину":"Нет в наличии"]}),(0,u.jsxs)(P,{onClick:()=>{G(!I),A(I?"Товар удален из избранного":"Товар добавлен в избранное"),z("success"),l(!0)},children:[u.jsx(Object(function(){var e=new S("Cannot find module '__barrel_optimize__?names=FaHeart,FaShoppingCart,FaStar!=!react-icons/fa'");throw e.code="MODULE_NOT_FOUND",e}()),{color:I?"#ef4444":"#6b7280"}),I?"В избранном":"В избранное"]})]})]})]}),d&&u.jsx(O.Z,{message:k,type:q,onClose:()=>l(!1)})]})},A=(0,i.l)(n,"default"),q=(0,i.l)(n,"getStaticProps"),z=(0,i.l)(n,"getStaticPaths"),I=(0,i.l)(n,"getServerSideProps"),G=(0,i.l)(n,"config"),H=(0,i.l)(n,"reportWebVitals"),R=(0,i.l)(n,"unstable_getStaticProps"),$=(0,i.l)(n,"unstable_getStaticPaths"),X=(0,i.l)(n,"unstable_getStaticParams"),Z=(0,i.l)(n,"unstable_getServerProps"),Q=(0,i.l)(n,"unstable_getServerSideProps"),W=new r.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/ProductDetails",pathname:"/ProductDetails",bundlePath:"",filename:""},components:{App:l(),Document:s()},userland:n})},5863:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let n=o(167),r=o(997),a=n._(o(6689)),i=o(6921);async function c(e){let{Component:t,ctx:o}=e;return{pageProps:await (0,i.loadGetInitialProps)(t,o)}}class s extends a.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,r.jsx)(e,{...t})}}s.origGetInitialProps=c,s.getInitialProps=c,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3843:(e,t,o)=>{o.d(t,{HI:()=>c,ZP:()=>l,bm:()=>i}),function(){var e=Error("Cannot find module 'axios'");throw e.code="MODULE_NOT_FOUND",e}();let n=new Map,r=Object(function(){var e=Error("Cannot find module 'axios'");throw e.code="MODULE_NOT_FOUND",e}())({baseURL:(void 0).PROD?"https://internet-magazine-4jwp.vercel.app/api":"http://localhost:3002/api",headers:{"Content-Type":"application/json"},withCredentials:!0}),a=()=>{let e=document.cookie.split(";").find(e=>e.trim().startsWith("token="));return e?e.split("=")[1]:null},i=e=>{document.cookie=`token=${e}; path=/; secure; samesite=strict; max-age=86400`},c=()=>{document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},s=e=>{let t=n.get(e);return t&&Date.now()-t.timestamp<3e5?t.data:null},d=(e,t)=>{n.set(e,{data:t,timestamp:Date.now()})};r.interceptors.request.use(e=>{if("get"===e.method){let t=s(e.url);if(t)return Promise.reject({__CACHE_HIT__:!0,data:t})}let t=a();return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>("get"===e.config.method&&d(e.config.url,e.data),e),async e=>e.__CACHE_HIT__?{data:e.data}:e.message&&e.message.includes("CORS")?(console.error("CORS ошибка:",e.message),Promise.reject(Error("Ошибка доступа к API"))):e.response?500===e.response.status?Promise.reject(Error("Ошибка сервера")):Promise.reject(e):e.config&&e.config.retryCount<3?(e.config.retryCount=(e.config.retryCount||0)+1,await new Promise(t=>setTimeout(t,1e3*e.config.retryCount)),r(e.config)):Promise.reject(Error("Ошибка сети")));let l=r},6166:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(997),r=o(6689);!function(){var e=Error("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}();let a=Object(function(){var e=Error("Cannot find module 'styled-components'");throw e.code="MODULE_NOT_FOUND",e}())`
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 1rem 2rem;
  background-color: #4CAF50;
  color: white;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  z-index: 1000;
  animation: slideIn 0.3s ease-out;

  @keyframes slideIn {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
`,i=({message:e,type:t="success",onClose:o})=>((0,r.useEffect)(()=>{if(o){let e=setTimeout(()=>{o()},3e3);return()=>clearTimeout(e)}},[o]),n.jsx(a,{style:{backgroundColor:"error"===t?"#f44336":"#4CAF50"},children:e}))},5086:(e,t,o)=>{o.d(t,{$R:()=>i,LL:()=>c,Rt:()=>s,Xq:()=>r,h2:()=>a}),function(){var e=Error("Cannot find module '@reduxjs/toolkit'");throw e.code="MODULE_NOT_FOUND",e}();let n=Object(function(){var e=Error("Cannot find module '@reduxjs/toolkit'");throw e.code="MODULE_NOT_FOUND",e}())({name:"cart",initialState:{items:[],total:0,status:"idle",error:null,lastAction:null},reducers:{addToCart:(e,t)=>{let o=e.items.find(e=>e.id===t.payload.id);o?o.quantity+=1:e.items.push({...t.payload,quantity:1}),e.total=e.items.reduce((e,t)=>e+t.price*t.quantity,0),e.lastAction={type:"add",item:t.payload}},removeFromCart:(e,t)=>{let o=e.items.find(e=>e.id===t.payload);e.items=e.items.filter(e=>e.id!==t.payload),e.total=e.items.reduce((e,t)=>e+t.price*t.quantity,0),e.lastAction={type:"remove",item:o}},updateQuantity:(e,t)=>{let{id:o,quantity:n}=t.payload,r=e.items.find(e=>e.id===o);if(r){let t=r.quantity;r.quantity=Math.max(1,Math.min(n,r.stock||99)),e.total=e.items.reduce((e,t)=>e+t.price*t.quantity,0),e.lastAction={type:"update",item:r,oldQuantity:t,newQuantity:r.quantity}}},clearCart:e=>{let t=[...e.items];e.items=[],e.total=0,e.lastAction={type:"clear",items:t}},undoLastAction:e=>{if(e.lastAction){switch(e.lastAction.type){case"add":e.items=e.items.filter(t=>t.id!==e.lastAction.item.id);break;case"remove":e.items.push(e.lastAction.item);break;case"update":let t=e.items.find(t=>t.id===e.lastAction.item.id);t&&(t.quantity=e.lastAction.oldQuantity);break;case"clear":e.items=e.lastAction.items}e.total=e.items.reduce((e,t)=>e+t.price*t.quantity,0),e.lastAction=null}},setError:(e,t)=>{e.error=t.payload,e.status="error"},clearError:e=>{e.error=null,e.status="idle"}}}),{addToCart:r,removeFromCart:a,updateQuantity:i,clearCart:c,undoLastAction:s,setError:d,clearError:l}=n.actions;n.reducer},5244:(e,t)=>{var o;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return o}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(o||(o={}))},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},1017:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),n=t.X(0,[777],()=>o(1186));module.exports=n})();